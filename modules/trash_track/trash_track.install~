<?php
/**
 *   Drupal Module for retrieving & parsing trash and recycling schedules
 *   for Montreal (as used by www.dechetsmontreal.ca).
 *
 *   Â© 2010 Kent Mewhort. This module is distributed under the terms of the
 *   GNU General Public License Version 3 <http://www.gnu.org/licenses/gpl.html>.
 *
 **/

/**
 * Implementation of hook_install().
 */
function trash_track_install() {
	// load the cck types
	module_load_include('inc', 'trash_track', 'trash_track_cck');
	$collection_cck =  _trash_track_schedule_export();
	$collection_cck =  _trash_track_collection_export();

	// load CCK content_copy
	require_once(drupal_get_path('module', 'content') . '/modules/content_copy/content_copy.module'{;

	// import the schedule type
	$form_state['values']['type_name'] = 'trash_schedule';
	$form_state['values']['macro'] = '$content = ' . var_export($content, TRUE) . ';';
	drupal_execute('content_copy_import_form', $form_state);
	
	// import the collection type
	$form_state['values']['type_name'] = 'trash_collection';
	$form_state['values']['macro'] = '$content = ' . var_export($content, TRUE) . ';';
	drupal_execute('content_copy_import_form', $form_state);
	
	content_clear_type_cache();
}

/**
 * Implementation of hook_uninstall().
 */
function trash_track_uninstall() {
}
